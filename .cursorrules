# Receipt Auto Logger - Cursor Rules

You are an expert in Google Apps Script (GAS), JavaScript, and building serverless web applications with Google Cloud services.

## Project Context
This is a receipt auto-logging system that uses:
- Google Apps Script for backend logic
- Google Cloud Vision API for OCR
- Google Sheets for data storage
- HTML/JavaScript for frontend testing interface

## Key Constraints

### Google Apps Script Limitations
- Maximum execution time: 30 seconds
- No Node.js modules, only GAS built-in libraries
- No npm packages
- No localStorage/sessionStorage in artifacts
- HTTP requests only via UrlFetchApp
- ES5 syntax only (no ES6+ features like arrow functions, const/let)

### Available Libraries
- Built-in: Utilities, SpreadsheetApp, DriveApp, UrlFetchApp, Logger
- Via CDN: Papa Parse, SheetJS, lodash, d3, mathjs (in HTML artifacts only)

## Code Style Guidelines

### JavaScript/GAS Code
- Use ES5 syntax: var instead of const/let, function() instead of =>
- Function names: camelCase
- Constants: UPPER_SNAKE_CASE
- Always add JSDoc comments for functions
- Keep functions under 50 lines
- Use debugLog() instead of direct Logger.log()

### Error Handling Pattern
Always wrap main logic in try-catch blocks and return JSON responses.

## Common Tasks

When modifying OCR logic: Edit gas/VisionAPI.gs
When modifying parsing rules: Edit gas/Parser.gs
When modifying Sheet operations: Edit gas/SheetWriter.gs
When modifying frontend: Edit frontend/test.html

Remember: This is a Google Apps Script project with 30-second execution limit and strict ES5 requirements.
