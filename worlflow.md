# 🔄 跨工具开发工作流

## 完整流程图

```
┌─────────────────────────────────────────────────────────────┐
│                     新任务开始                                │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  📝 Step 0: 任务规划 (Cursor - 本地)                         │
├─────────────────────────────────────────────────────────────┤
│  工具: Cursor 本地编辑                                        │
│  文件: workflows/current_tasks.md                            │
│  时间: 5 分钟                                                │
│                                                              │
│  操作:                                                        │
│  1. 复制 task_template.md                                    │
│  2. 填写任务信息                                              │
│  3. 分解子任务                                                │
│  4. 分配到对应工具                                            │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  🔍 Step 1: 调研 (ChatGPT Plus)                             │
├─────────────────────────────────────────────────────────────┤
│  工具: ChatGPT Plus (开启联网)                               │
│  时间: 15 分钟                                               │
│                                                              │
│  输入:                                                        │
│  - 需要调研的技术/问题                                        │
│  - 关键词列表                                                │
│                                                              │
│  操作:                                                        │
│  1. 在 ChatGPT 中搜索最新信息                                │
│  2. 收集相关链接和代码示例                                    │
│  3. 整理调研结果                                             │
│                                                              │
│  输出:                                                        │
│  - sync/research_links.md (保存链接)                         │
│  - sync/chatgpt_findings.md (保存要点)                       │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  📋 Step 2: 准备 Claude 输入 (Cursor - 本地)                │
├─────────────────────────────────────────────────────────────┤
│  工具: Cursor 本地编辑                                        │
│  文件: sync/for_claude.md                                    │
│  时间: 10 分钟                                               │
│                                                              │
│  操作:                                                        │
│  1. 打开 sync/for_claude.md                                  │
│  2. 复制当前相关代码                                         │
│  3. 描述问题和需求                                           │
│  4. 添加测试用例                                             │
│  5. 列出约束条件                                             │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  🤖 Step 3: 架构设计 (Claude.ai Pro)                        │
├─────────────────────────────────────────────────────────────┤
│  工具: Claude.ai Pro Project                                 │
│  时间: 30-60 分钟                                            │
│                                                              │
│  输入:                                                        │
│  - sync/for_claude.md 的内容（复制粘贴）                     │
│  - 调研结果                                                   │
│                                                              │
│  操作:                                                        │
│  1. 打开 Claude.ai Project                                   │
│  2. 粘贴准备好的内容                                         │
│  3. 深入讨论架构和方案                                       │
│  4. 要求生成具体代码                                         │
│  5. 审查和迭代优化                                           │
│                                                              │
│  输出:                                                        │
│  - 架构方案                                                   │
│  - 优化后的代码                                              │
│  - 实施建议                                                   │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  💾 Step 4: 保存 Claude 输出 (Cursor - 本地)                │
├─────────────────────────────────────────────────────────────┤
│  工具: Cursor 本地编辑                                        │
│  文件: sync/from_claude.md                                   │
│  时间: 5 分钟                                                │
│                                                              │
│  操作:                                                        │
│  1. 从 Claude 对话中复制方案                                 │
│  2. 粘贴到 sync/from_claude.md                               │
│  3. 整理格式和代码块                                         │
│  4. 添加实施步骤                                             │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  ⚡ Step 5: 快速实现 (Cursor - Cmd+K 慢速)                  │
├─────────────────────────────────────────────────────────────┤
│  工具: Cursor (优先使用慢速 Cmd+K)                           │
│  时间: 1-2 小时                                              │
│                                                              │
│  操作:                                                        │
│  1. 打开需要修改的文件                                        │
│  2. 选中相关代码                                             │
│  3. Cmd+K (慢速)                                             │
│  4. 粘贴 Claude 的代码或描述需求                             │
│  5. 等待 30-60 秒生成                                        │
│  6. 审查并接受修改                                           │
│  7. 用 Tab 补全细节                                          │
│                                                              │
│  配额使用:                                                    │
│  - 慢速 Cmd+K: 5-10 次 (无限制)                              │
│  - Tab 补全: 20-50 次                                        │
│  - 快速 Cmd+K: 0 次 (省着用)                                 │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  🧪 Step 6: 本地测试 (Cursor + GAS)                         │
├─────────────────────────────────────────────────────────────┤
│  工具: Cursor + GAS 编辑器                                    │
│  时间: 20-30 分钟                                            │
│                                                              │
│  操作:                                                        │
│  1. 复制代码到 GAS 编辑器                                    │
│  2. 运行 testFullFlow()                                      │
│  3. 检查执行日志                                             │
│  4. 验证功能正确性                                           │
│  5. 测试边界情况                                             │
│                                                              │
│  如果测试失败 → 回到 Step 5 或 Step 3                        │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  📋 Step 7: 代码审查 (Claude.ai Pro)                        │
├─────────────────────────────────────────────────────────────┤
│  工具: Claude.ai Pro Project                                 │
│  时间: 15-20 分钟                                            │
│                                                              │
│  输入:                                                        │
│  - 实现后的完整代码                                          │
│  - 测试结果                                                   │
│                                                              │
│  操作:                                                        │
│  在 Claude Project 中:                                       │
│  "请审查以下代码:                                            │
│   [粘贴代码]                                                 │
│                                                              │
│   审查重点:                                                   │
│   1. ES5 语法是否正确                                        │
│   2. 错误处理是否完善                                        │
│   3. 性能是否可优化                                          │
│   4. 边界情况是否考虑                                        │
│   5. 代码质量和可维护性"                                     │
│                                                              │
│  输出:                                                        │
│  - 问题列表                                                   │
│  - 优化建议                                                   │
│  - 修改代码                                                   │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
                    有问题需要修复?
                          │
                ┌─────────┴──────────┐
                │                    │
               是                    否
                │                    │
                ▼                    ▼
┌─────────────────────────┐  ┌─────────────────────────────┐
│ 🔧 Step 8a: 修复问题     │  │ ✅ Step 8b: 部署             │
│ (Cursor - 快速/慢速)     │  │ (GAS 编辑器)                │
├─────────────────────────┤  ├─────────────────────────────┤
│ 紧急修复:                │  │ 操作:                        │
│ → 用快速 Cmd+K (配额)   │  │ 1. 在 GAS 保存代码          │
│                          │  │ 2. 部署 → 管理部署          │
│ 一般修复:                │  │ 3. 编辑 → 新版本            │
│ → 用慢速 Cmd+K          │  │ 4. 部署                     │
│                          │  │ 5. 更新版本号               │
│ 回到 Step 6 测试         │  └─────────────┬───────────────┘
└─────────────────────────┘                 │
                                            ▼
                          ┌─────────────────────────────────┐
                          │ 📝 Step 9: 更新文档              │
                          ├─────────────────────────────────┤
                          │ 工具: Cursor 本地编辑            │
                          │ 时间: 10 分钟                   │
                          │                                 │
                          │ 操作:                            │
                          │ 1. 更新 workflows/current_tasks │
                          │ 2. 标记任务为完成 ✅            │
                          │ 3. 记录关键决策                 │
                          │ 4. 归档到 completed_tasks.md   │
                          │ 5. 清空 sync/ 文件夹           │
                          │ 6. Git commit                   │
                          └─────────────┬───────────────────┘
                                        │
                                        ▼
                          ┌─────────────────────────────────┐
                          │        🎉 任务完成！             │
                          └─────────────────────────────────┘
```

---

## ⏱️ 时间分配

```
总计: 3-4 小时/任务

├─ Step 0: 任务规划        5 分钟
├─ Step 1: ChatGPT 调研   15 分钟
├─ Step 2: 准备输入        10 分钟
├─ Step 3: Claude 设计     30-60 分钟  (🕐 最长)
├─ Step 4: 保存输出        5 分钟
├─ Step 5: Cursor 实现     1-2 小时    (🕐 最长)
├─ Step 6: 测试           20-30 分钟
├─ Step 7: Claude 审查     15-20 分钟
├─ Step 8: 修复/部署       10-20 分钟
└─ Step 9: 更新文档        10 分钟
```

---

## 🎯 配额消耗预估

### 单个任务配额消耗

```
Cursor Free:
├─ 快速 Cmd+K: 0-2 次    (紧急修复时)
├─ 慢速 Cmd+K: 5-10 次   (主力开发)
└─ Tab 补全: 20-50 次     (日常补全)

Claude.ai Pro:
├─ 长对话: 1-2 个 Session
└─ 消息数: 20-50 条      (无限制)

ChatGPT Plus:
├─ 搜索查询: 3-5 次
└─ 消息数: 10-20 条      (无限制)
```

### 月度配额规划

```
假设每月 5-6 个中等任务:

Cursor Fast Cmd+K:
5 任务 × 2 次 = 10 次
剩余: 40 次 (用于紧急情况) ✅

Cursor Slow Cmd+K:
6 任务 × 8 次 = 48 次
无限制 ✅

Tab 补全:
日常使用约 1000 次/月
剩余: 1000 次 ✅

Claude.ai Pro:
无限制 ✅

ChatGPT Plus:
无限制 ✅
```

---

## 💡 效率优化技巧

### 1. 批量准备
```
周日晚上:
□ 规划本周 3 个任务
□ 为每个任务创建 task file
□ 预先填写已知信息
□ 列出需要调研的内容

→ 周一开始直接执行
```

### 2. 并行处理
```
当 Cursor 慢速等待时:
→ 切换到 Claude 讨论下一个问题
→ 或在 ChatGPT 调研其他内容
→ 充分利用等待时间
```

### 3. 模板复用
```
常见任务类型建立模板:
├─ 添加新字段
├─ 性能优化
├─ Bug 修复
└─ 新功能开发

→ 减少准备时间
```

---

## 🔄 工作流变体

### 简化版（小任务 <1 小时）
```
跳过 ChatGPT 调研
→ 直接 Claude 设计
→ Cursor 实现
→ 快速测试
```

### 加强版（复杂任务 >1 天）
```
增加:
├─ 多轮 Claude 设计讨论
├─ 原型验证
├─ 分阶段实现
└─ 全面集成测试
```